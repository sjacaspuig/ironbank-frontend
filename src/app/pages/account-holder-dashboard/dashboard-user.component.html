<app-layout-two-columns [leftWidth]="50" [nbSpinner]="spinnerUser || spinnerTransaction">

    <!-- User details -->
    <nb-card left>
        <nb-card-header>User Details</nb-card-header>
        <nb-card-body *ngIf="accountHolder$ | async as user">
            <nb-list>
                <nb-list-item><b>ID:</b> {{ user.id }}</nb-list-item>
                <nb-list-item><b>Name:</b> {{ user.firstName }} {{ user.lastName }}</nb-list-item>
                <nb-list-item><b>Username:</b> {{ user.username }}</nb-list-item>
                <nb-list-item><b>Email:</b> {{ user.email }}</nb-list-item>
                <nb-list-item><b>Date of birth:</b> {{ user.birthDate | date:'medium'}}</nb-list-item>
            </nb-list>

            <nb-accordion>
                <nb-accordion-item>
                    <nb-accordion-item-header>
                        Primary Address
                    </nb-accordion-item-header>
                    <nb-accordion-item-body>
                        <nb-list>
                            <nb-list-item><b>Street:</b> {{ user.primaryAddress.street }}</nb-list-item>
                            <nb-list-item><b>Number:</b> {{ user.primaryAddress.number }} {{ user.lastName }}
                            </nb-list-item>
                            <nb-list-item><b>Postal code:</b> {{ user.primaryAddress.postalCode }}</nb-list-item>
                            <nb-list-item><b>Country:</b> {{ user.primaryAddress.country}}</nb-list-item>
                            <nb-list-item *ngIf="user?.primaryAddress?.province"><b>Province:</b> {{
                                user.primaryAddress.province }}</nb-list-item>
                            <nb-list-item><b>City:</b> {{ user.primaryAddress.city }}</nb-list-item>
                            <nb-list-item *ngIf="user?.primaryAddress?.extraInformation"><b>Extra information:</b> {{
                                user.primaryAddress.extraInformation }}</nb-list-item>
                        </nb-list>
                    </nb-accordion-item-body>
                </nb-accordion-item>

                <nb-accordion-item *ngIf="user?.secondaryAddress">
                    <nb-accordion-item-header>
                        Primary Address
                    </nb-accordion-item-header>
                    <nb-accordion-item-body>
                        <nb-list>
                            <nb-list-item><b>Street:</b> {{ user.secondaryAddress?.street }}</nb-list-item>
                            <nb-list-item><b>Number:</b> {{ user.secondaryAddress?.number }} {{ user.lastName }}
                            </nb-list-item>
                            <nb-list-item><b>Postal code:</b> {{ user.secondaryAddress?.postalCode }}</nb-list-item>
                            <nb-list-item><b>Country:</b> {{ user.secondaryAddress?.country}}</nb-list-item>
                            <nb-list-item *ngIf="user?.secondaryAddress?.province"><b>Province:</b> {{
                                user.secondaryAddress?.province }}</nb-list-item>
                            <nb-list-item><b>City:</b> {{ user.secondaryAddress?.city }}</nb-list-item>
                            <nb-list-item *ngIf="user?.secondaryAddress?.extraInformation"><b>Extra information:</b> {{
                                user.secondaryAddress?.extraInformation }}</nb-list-item>
                        </nb-list>
                    </nb-accordion-item-body>
                </nb-accordion-item>
            </nb-accordion>
        </nb-card-body>

    </nb-card>

    <div right>

        <!-- Carousel the user's accounts -->
        <div class="carousel-accounts">
            <nb-card>
                <nb-card-header>Account 1</nb-card-header>
                <nb-card-body>Details</nb-card-body>
            </nb-card>

            <nb-card>
                <nb-card-header>Account 2</nb-card-header>
                <nb-card-body>Details</nb-card-body>
            </nb-card>

            <nb-card>
                <nb-card-header>Account 3</nb-card-header>
                <nb-card-body>Details</nb-card-body>
            </nb-card>

            <nb-card>
                <nb-card-header>Account 4</nb-card-header>
                <nb-card-body>Details</nb-card-body>
            </nb-card>

            <nb-card>
                <nb-card-header>Account 5</nb-card-header>
                <nb-card-body>Details</nb-card-body>
            </nb-card>

            <nb-card>
                <nb-card-header>Account 6</nb-card-header>
                <nb-card-body>Details</nb-card-body>
            </nb-card>

            <nb-card>
                <nb-card-header>Account 7</nb-card-header>
                <nb-card-body>Details</nb-card-body>
            </nb-card>

            <nb-card>
                <nb-card-header>Account 8</nb-card-header>
                <nb-card-body>Details</nb-card-body>
            </nb-card>
        </div>

        <!-- Transactions list -->
        <nb-card>
            <nb-card-header>Transactions</nb-card-header>
            <nb-list>
                <nb-list-item *ngFor="let transaction of (transactions$ | async)" [ngClass]="{
                    'failed': transaction.status === 'FAILED',
                    'pending': transaction.status === 'PENDING'
                }">
                    <app-layout-two-columns>
                        <div left>
                            <div *ngIf="transaction?.id"><b>ID: </b>{{ transaction.id }}</div>
                            <div *ngIf="transaction?.amount"><b>Amount: </b>{{ transaction.amount.amount }} {{ transaction.amount.currency }}</div>
                            <div *ngIf="transaction?.fee"><b>Fees: </b>{{ transaction.fee?.amount }} {{ transaction.fee?.currency }}</div>
                            <div *ngIf="transaction?.type"><b>Transaction type: </b>{{ transaction.type }}</div>
                            <div *ngIf="transaction?.status"><b>Transaction status: </b>{{ transaction.status }}
                                <span *ngIf="transaction.status === 'FAILED' && transaction?.failureReason"> - <i>{{ transaction.failureReason }}</i></span>
                            </div>
                            <div *ngIf="transaction?.concept"><b>Concept: </b>{{ transaction.concept }}</div>
                        </div>
                        <div right>                    
                            <div *ngIf="transaction?.sourceAccount"><b>Source account: </b>{{ transaction.sourceAccount }}</div>
                            <div *ngIf="transaction?.targetAccount"><b>Target account: </b>{{ transaction.targetAccount }}</div>
                            <div *ngIf="transaction?.name"><b>Name: </b>{{ transaction.name }}</div>
                            <div *ngIf="transaction?.transactionDate"><b>Date: </b>{{ transaction.transactionDate | date:'medium' }}</div>
                            <div *ngIf="transaction?.hashedKey"><b>Hashed key: </b>{{ transaction.hashedKey }}</div>
                        </div>
                    </app-layout-two-columns>
                </nb-list-item>
            </nb-list>
        </nb-card>
    </div>
</app-layout-two-columns>